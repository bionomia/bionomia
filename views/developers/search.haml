-content_for :title do
  For Developers: Search

-content_for :jumbotron do
  %div{class:"jumbotron jumbotron-fluid d-flex flex-wrap"}
    %div{class:"mr-auto p-2"}
      %h1{class:"h2"} For Developers

= haml :'partials/developers/tabs', layout:false, locals: { active_tab: locals[:active_tab] }

%h3{class:"mt-4 mb-3"}= I18n.t('developer.search')

%p{class:"mb-4"}
  Search for people is exposed as JSON-LD documents with Cross-Origin Resource Sharing (CORS) using elements from
  %a{href: "https://schema.org/"}
    https://schema.org
  as type
  = succeed ", " do
    %a{href: "https://schema.org/DataFeed"} DataFeed
  OpenSearch, and
  = succeed "." do
    %a{href: "https://www.w3.org/ns/activitystreams"} W3C ActivityStreams

%dl
  %dt Base URL
  %dd{class:"pl-2"} https://api.bionomia.net/users/search

  %dt ?q=
  %dd{class:"pl-2"} single human name (required)

  %dt &families_collected=
  %dd{class:"pl-2"} comma-separated list of taxonomic families collected (optional)

  %dt &families_identified=
  %dd{class:"pl-2"} comma-separated list of taxonomic families identified (optional)

  %dt &date=
  %dd{class:"pl-2"} a date expressed as YYYY-MM-DD, YYYY-MM, or YYYY (optional)

  %dt &page=
  %dd{class:"pl-2"} page number; there is a fixed 30 items per page (optional)

  %dt &strict=
  %dd{class:"pl-2"} boolean for MUST (=true) vs SHOULD (=false) on families_identified, families_collected, and date when any are present (optional)

  %dt &callback=
  %dd{class:"pl-2"} A string to produce a JSONP response instead of a JSON-LD response (optional)

  %dt{class:"mt-3"} Example
  %dd{class:"pl-2"}
    https://api.bionomia.net/users/search?q=smith&families_collected=scarabaeidae&strict=true

  %dt Response
  %dd
    %pre{class:"pre-scrollable bg-dark text-white border rounded p-3"}
      %code
        :preserve
          {
            <span class="token property">"@context"</span>: {
              <span class="token property">"@vocab"</span>: <span class="token string">"http://schema.org"</span>,
              <span class="token property">"opensearch"</span>: <span class="token string">"http://a9.com/-/spec/opensearch/1.1/"</span>,
              <span class="token property">"as"</span>: <span class="token string">"https://www.w3.org/ns/activitystreams#"</span>
            },
            <span class="token property">"@type"</span>: <span class="token string">"DataFeed"</span>,
            <span class="token property">"opensearch:totalResults"</span>: <span class="token number">1</span>,
            <span class="token property">"opensearch:itemsPerPage"</span>: <span class="token number">1</span>,
            <span class="token property">"as:first"</span>: <span class="token string">"https://api.bionomia.net/users/search?q=smith&families_collected=curculionidae&strict=true&page=1"</span>,
            <span class="token property">"as:prev"</span>: <span class="token symbol">null</span>,
            <span class="token property">"as:current"</span>: <span class="token string">"https://api.bionomia.net/users/search?q=smith&families_collected=curculionidae&strict=true"</span>,
            <span class="token property">"as:next"</span>: <span class="token symbol">null</span>,
            <span class="token property">"as:last"</span>: <span class="token string">"https://api.bionomia.net/users/search?q=smith&families_collected=curculionidae&strict=true&page=1"</span>,
            <span class="token property">"name"</span>: <span class="token string">"Bionomia user search results"</span>,
            <span class="token property">"description"</span>: <span class="token string">"Bionomia user search results expressed as a schema.org JSON-LD DataFeed.
              q={name} is a search by human name;
              families_identified={families_identified} is a comma-separated list of taxonomic families identified;
              families_collected={families_collected} is a comma-separated list of taxonomic families collected;
              date={date} is a date in the form YYYY, YYYY-MM, or YYYY-MM-DD and is compared to birth and death dates;
              page={page} is the page number and there is a fixed 30 items per page;
              strict={true|false} is a boolean for MUST vs SHOULD on families_identified, families_collected, and date"</span>,
            <span class="token property">"license"</span>: <span class="token string">"https://creativecommons.org/publicdomain/zero/1.0/"</span>,
            <span class="token property">"potentialAction"</span>: {
              <span class="token property">"@type"</span>: <span class="token string">"SearchAction"</span>,
              <span class="token property">"target"</span>: <span class="token string">"https://api.bionomia.net/users/search?q={name}&families_identified={families_identified}&families_collected={families_collected}&date={date}&page={page}&strict={true|false}"</span>
            },
            <span class="token property">"dataFeedElement"</span>: [
              {
                <span class="token property">"@type"</span>: <span class="token string">"DataFeedItem"</span>,
                <span class="token property">"item"</span>: {
                  <span class="token property">"@type"</span>: <span class="token string">"Person"</span>,
                  <span class="token property">"@id"</span>: <span class="token string">"https://bionomia.net/0000-0002-8059-5133"</span>,
                  <span class="token property">"name"</span>: <span class="token string">"Andrew B.T. Smith"</span>,
                  <span class="token property">"givenName"</span>: <span class="token string">"Andrew B.T."</span>,
                  <span class="token property">"familyName"</span>: <span class="token string">"Smith"</span>,
                  <span class="token property">"alternateName"</span>: [
                    <span class="token string">"Smith, Andrew B.T."</span>
                  ],
                  <span class="token property">"knowsAbout"</span>: [
                    {
                      <span class="token property">"@type"</span>: <span class="token string">"ItemList"</span>,
                      <span class="token property">"name"</span>: <span class="token string">"families_identified"</span>,
                      <span class="token property">"itemListElement"</span>: [
                        {
                          <span class="token property">"@type"</span>: <span class="token string">"ListItem"</span>,
                          <span class="token property">"name"</span>: <span class="token string">"Carabidae"</span>
                        }
                      ]
                    },
                    {
                      <span class="token property">"@type"</span>: <span class="token string">"ItemList"</span>,
                      <span class="token property">"name"</span>: <span class="token string">"families_collected"</span>,
                      <span class="token property">"itemListElement"</span>: [
                        {
                          <span class="token property">"@type"</span>: <span class="token string">"ListItem"</span>,
                          <span class="token property">"name"</span>: <span class="token string">"Scarabaeidae"</span>
                        },
                        {
                          <span class="token property">"@type"</span>: <span class="token string">"ListItem"</span>,
                          <span class="token property">"name"</span>: <span class="token string">"Curculionidae"</span>
                        },
                        ...
                      ]
                    }
                  ],
                  <span class="token property">"sameAs"</span>: <span class="token string">"https://orcid.org/0000-0002-8059-5133"</span>
                }
              }
            ]
          }
